import{a as c}from"./axios-Bo0ATomq.js";import{_ as v,c as n,a as t,b as h,w as _,F as f,f as g,r as b,o as i,d as u,t as a,n as x,i as w}from"./index-LGRT9Jh6.js";import{_ as y}from"./logo-yh1I98PW.js";var $={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"forest_mind",BASE_URL:"/vue_week8_homework3/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:p,VITE_PATH:k}=$,P={data(){return{tempProduct:{},products:[],pages:{}}},created(){this.checkLogin(),this.getProducts()},methods:{checkLogin(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)newToken\s*=\s*([^;]*).*$)|^.*$/,"$1");c.defaults.headers.common.Authorization=s,this.$route.path.includes("/admin")&&c.post(`${p}/v2/api/user/check`,{},{headers:{Authorization:s}}).then(()=>{}).catch(()=>{alert("尚未登入會員，請重新登入！"),this.$router.push("login")})},getProducts(s=1){console.log(this.$route),c.get(`${p}/v2/api/${k}/admin/products?page=${s}`).then(o=>{this.products=o.data.products,this.pages=o.data.pagination}).catch(o=>{alert(o)})},delProduct(s){console.log(this.$route),c.delete(`${p}/v2/api/${k}/admin/product/${s}`).then(o=>{alert(o.data.message),this.getProducts()}).catch(o=>{alert(o)})},editProduct(s){this.$router.push({path:"edit-product",query:{product:JSON.stringify(s)}})}},components:{}},C={class:"d-flex"},V={class:"p-2 flex-shrink-0 flex-column text-white",style:{width:"17.5em",height:"100vh","background-color":"#41774A"}},E=t("div",{class:"d-md-flex align-content-center"},[t("img",{src:y,style:{height:"7.5em"},alt:""})],-1),L={class:"nav flex-column"},T={class:"nav-item"},A={class:"nav-item"},R={class:"p-2 mt-4 mx-3 w-100"},S=t("h4",null,"產品管理頁面",-1),B={class:"d-flex justify-content-end w-100 pe-4"},D=t("a",{href:"/admin/edit-product"},[t("i",{class:"bi bi-file-earmark-plus fa-10x"})],-1),I={class:"table mt-4"},N=t("thead",null,[t("tr",null,[t("th",{width:"120"}," 分類 "),t("th",null,"產品名稱"),t("th",{width:"120"}," 原價 "),t("th",{width:"120"}," 售價 "),t("th",{width:"100"}," 是否啟用 "),t("th",{width:"120"}," 編輯 ")])],-1),z={class:"text-end"},O={class:"text-end"},U={key:0,class:"text-success"},j={key:1},F={class:"btn-group"},H=["onClick"],M=["onClick"],q={class:""},J={"aria-label":"..."},G={class:"justify-content-center pagination pagination-sm"},K=["onClick"];function Q(s,o,W,X,d,l){const r=b("RouterLink");return i(),n("div",C,[t("div",V,[E,t("ul",L,[t("li",T,[h(r,{class:"nav-link text-white",to:"/admin/products"},{default:_(()=>[u("產品管理列表")]),_:1})]),t("li",A,[h(r,{class:"nav-link text-white",to:"/admin/order"},{default:_(()=>[u("購物車管理列表")]),_:1})])])]),t("div",R,[S,t("div",B,[h(r,{to:"/admin/edit-product"},{default:_(()=>[u("新建產品")]),_:1}),D]),t("table",I,[N,(i(!0),n(f,null,g(d.products,e=>(i(),n("tbody",{key:e.id},[t("tr",null,[t("td",null,a(e.category),1),t("td",null,a(e.title),1),t("td",z,a(e.origin_price),1),t("td",O,a(e.price),1),t("td",null,[e.is_enabled===1?(i(),n("span",U,"啟用")):(i(),n("span",j,"未啟用"))]),t("td",null,[t("div",F,[t("button",{type:"button",onClick:m=>l.editProduct(e),style:{"background-color":"#41774A"},class:"btn btn-primary btn-sm"}," 編輯 ",8,H),t("button",{type:"button",onClick:m=>l.delProduct(e.id),class:"btn btn-outline-danger btn-sm"}," 刪除 ",8,M)])])])]))),128))]),t("div",q,[t("nav",J,[t("ul",G,[(i(!0),n(f,null,g(d.pages.total_pages,e=>(i(),n("li",{class:x(["page-item",{active:e===d.pages.current_page}]),key:e+123},[t("a",{class:"page-link",onClick:w(m=>l.getProducts(e),["prevent"]),href:"#",tabindex:"-1"},a(e),9,K)],2))),128))])])])])])}const et=v(P,[["render",Q]]);export{et as default};
