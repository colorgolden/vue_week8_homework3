import{a}from"./axios-Bo0ATomq.js";import{_ as w,c as i,a as t,b as h,w as b,g as n,h as d,F as g,f as P,k as y,r as k,o as r,d as f}from"./index-LGRT9Jh6.js";import{_ as U}from"./logo-yh1I98PW.js";var x={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"forest_mind",BASE_URL:"/vue_week8_homework3/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:m,VITE_PATH:_}=x,V={data(){return{temp:{},addNew:!1,newProduct:{is_enabled:1,imageUrl:"",imagesUrl:[""]}}},created(){this.checkLogin(),this.getProduct();const l=this.$route.query.product,e=JSON.parse(l);this.newProduct={...e}},methods:{checkLogin(){const l=document.cookie.replace(/(?:(?:^|.*;\s*)newToken\s*=\s*([^;]*).*$)|^.*$/,"$1");a.defaults.headers.common.Authorization=l,this.$route.path.includes("/admin")&&a.post(`${m}/v2/api/user/check`,{},{headers:{Authorization:l}}).then(()=>{}).catch(()=>{alert("尚未登入會員，請重新登入！"),this.$router.push("login")})},getProduct(){a.get(`${m}/v2/api/${_}/admin/products`).then(l=>{console.log(l)}).catch(l=>{alert(l)})},addNewProduct(){a.post(`${m}/v2/api/${_}/admin/product`,{data:this.newProduct}).then(l=>{alert(l.data.message),this.$router.push("/admin/products")}).catch(l=>{alert(l)})},updateProduct(){a.post(`${m}/v2/api/${_}/admin/product/${id}`,{data:this.newProduct}).then(l=>{alert(l.data.message),console.log("更新產品成功")}).catch(l=>{alert(l)})}}},N={class:"d-flex"},C={class:"p-2 flex-shrink-0 flex-column text-white",style:{width:"17.5em",height:"100vh","background-color":"#41774A"}},E=t("div",{class:"d-md-flex align-content-center"},[t("img",{src:U,style:{height:"7.5em"},alt:""})],-1),L={class:"nav flex-column"},T={class:"nav-item"},A={class:"nav-item"},R=t("hr",null,null,-1),I={class:"p-2 mt-4 mx-3 w-100"},D={class:"modal-dialog modal-xl"},z=t("h4",null,"編輯產品",-1),B={class:"modal-content border-0"},M={class:"modal-header bg-dark text-white"},S={id:"productModalLabel",class:"modal-title"},O={key:0},F={key:1},H=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),q={class:"modal-body"},J={class:"row"},j={class:"col-sm-4"},G={class:"mb-3"},K=t("label",{for:"imageUrl",class:"form-label"},"主要圖片",-1),Q=["src"],W=t("hr",null,null,-1),X={key:0},Y={class:"mb-3"},Z=["for"],$=["id","onUpdate:modelValue"],tt=["src"],et={key:1},ot={class:"col-sm-8"},st={class:"mb-3"},lt=t("label",{for:"title",class:"form-label"},"標題",-1),nt={class:"row"},it={class:"mb-3 col-md-6"},dt=t("label",{for:"category",class:"form-label"},"分類",-1),rt={class:"mb-3 col-md-6"},ct=t("label",{for:"unit",class:"form-label"},"單位",-1),at={class:"row"},ut={class:"mb-3 col-md-6"},mt=t("label",{for:"origin_price",class:"form-label"},"原價",-1),_t={class:"mb-3 col-md-6"},pt=t("label",{for:"price",class:"form-label"},"售價",-1),ht=t("hr",null,null,-1),bt={class:"mb-3"},ft=t("label",{for:"description",class:"form-label"},"產品描述",-1),vt={class:"mb-3"},wt=t("label",{for:"content",class:"form-label"},"說明內容",-1),gt={class:"mb-3"},Pt={class:"form-check"},yt=t("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),kt=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1),Ut={key:0},xt={key:1};function Vt(l,e,Nt,Ct,o,u){const p=k("RouterLink");return r(),i("div",N,[t("div",C,[E,t("ul",L,[t("li",T,[h(p,{class:"nav-link text-white",to:"/admin/products"},{default:b(()=>[f("產品管理列表")]),_:1})]),t("li",A,[h(p,{class:"nav-link text-white",to:"/admin/order"},{default:b(()=>[f("購物車管理列表")]),_:1})])])]),R,t("div",I,[t("div",null,[t("div",D,[z,t("div",B,[t("div",M,[t("h5",S,[o.addNew?(r(),i("span",O,"新增產品")):(r(),i("span",F,"編輯產品"))]),H]),t("div",q,[t("div",J,[t("div",j,[t("div",G,[K,n(t("input",{id:"imageUrl","onUpdate:modelValue":e[0]||(e[0]=s=>o.newProduct.imageUrl=s),type:"text",class:"form-control mb-2",placeholder:"請輸入主要圖片連結"},null,512),[[d,o.newProduct.imageUrl,void 0,{lazy:!0}]]),t("img",{style:{"max-width":"280px","max-height":"280px"},class:"img-fluid",src:o.newProduct.imageUrl},null,8,Q)]),W,Array.isArray(o.newProduct.imagesUrl)?(r(),i("div",X,[(r(!0),i(g,null,P(o.newProduct.imagesUrl,(s,c)=>(r(),i("div",{class:"mb-1",key:c},[t("div",Y,[t("label",{for:"imagesUrl"+c,class:"form-label"},"圖片網址",8,Z),n(t("input",{id:"imagesUrl"+c,"onUpdate:modelValue":v=>o.newProduct.imagesUrl[c]=v,type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,8,$),[[d,o.newProduct.imagesUrl[c],void 0,{lazy:!0}]])]),t("img",{class:"img-fluid",src:s},null,8,tt)]))),128)),t("div",null,[t("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[1]||(e[1]=s=>o.newProduct.imagesUrl.push(""))}," 新增其他圖片 ")]),t("div",null,[t("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[2]||(e[2]=s=>o.newProduct.imagesUrl.pop())}," 刪除圖片 ")])])):(r(),i("div",et,[t("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=(...s)=>l.addImagesUrl&&l.addImagesUrl(...s))}," 新增圖片 ")]))]),t("div",ot,[t("div",st,[lt,n(t("input",{id:"title","onUpdate:modelValue":e[4]||(e[4]=s=>o.newProduct.title=s),type:"text",class:"form-control",placeholder:"請輸入標題"},null,512),[[d,o.newProduct.title]])]),t("div",nt,[t("div",it,[dt,n(t("input",{id:"category","onUpdate:modelValue":e[5]||(e[5]=s=>o.newProduct.category=s),type:"text",class:"form-control",placeholder:"請輸入分類"},null,512),[[d,o.newProduct.category]])]),t("div",rt,[ct,n(t("input",{id:"unit","onUpdate:modelValue":e[6]||(e[6]=s=>o.newProduct.unit=s),type:"text",class:"form-control",placeholder:"請輸入單位"},null,512),[[d,o.newProduct.unit]])])]),t("div",at,[t("div",ut,[mt,n(t("input",{id:"origin_price","onUpdate:modelValue":e[7]||(e[7]=s=>o.newProduct.origin_price=s),type:"number",min:"0",class:"form-control",placeholder:"請輸入原價"},null,512),[[d,o.newProduct.origin_price,void 0,{number:!0}]])]),t("div",_t,[pt,n(t("input",{id:"price","onUpdate:modelValue":e[8]||(e[8]=s=>o.newProduct.price=s),type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[d,o.newProduct.price,void 0,{number:!0}]])])]),ht,t("div",bt,[ft,n(t("textarea",{id:"description","onUpdate:modelValue":e[9]||(e[9]=s=>o.newProduct.description=s),type:"text",class:"form-control",placeholder:"請輸入產品描述"},`
                `,512),[[d,o.newProduct.description]])]),t("div",vt,[wt,n(t("textarea",{id:"content","onUpdate:modelValue":e[10]||(e[10]=s=>o.newProduct.content=s),type:"text",class:"form-control",placeholder:"請輸入說明內容"},`
                `,512),[[d,o.newProduct.content]])]),t("div",gt,[t("div",Pt,[n(t("input",{id:"is_enabled","onUpdate:modelValue":e[11]||(e[11]=s=>o.newProduct.is_enabled=s),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[y,o.newProduct.is_enabled]]),yt])])])])]),t("div",null,[kt,o.addNew?(r(),i("span",Ut,[t("button",{type:"button",class:"btn btn-primary",onClick:e[12]||(e[12]=(...s)=>u.addNewProduct&&u.addNewProduct(...s))}," 確認 ")])):(r(),i("span",xt,[t("button",{type:"button",class:"btn btn-primary",onClick:e[13]||(e[13]=(...s)=>u.updateProduct&&u.updateProduct(...s))}," 確認 ")]))])])])])])])}const At=w(V,[["render",Vt]]);export{At as default};
