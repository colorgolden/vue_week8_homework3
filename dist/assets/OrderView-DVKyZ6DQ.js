import{a as r}from"./axios-Bo0ATomq.js";import{_ as g,c as a,a as t,b as d,w as h,F as _,f as u,r as k,o as n,d as m,t as i,n as v,i as x}from"./index-LGRT9Jh6.js";import{_ as w}from"./logo-yh1I98PW.js";var b={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"forest_mind",BASE_URL:"/vue_week8_homework3/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:p,VITE_PATH:$}=b,y={data(){return{temp:{},carts:[],pages:{}}},created(){this.checkLogin(),this.getCarts()},methods:{checkLogin(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)newToken\s*=\s*([^;]*).*$)|^.*$/,"$1");r.defaults.headers.common.Authorization=o,this.$route.path.includes("/admin")&&r.post(`${p}/v2/api/user/check`,{},{headers:{Authorization:o}}).then(()=>{}).catch(()=>{alert("尚未登入會員，請重新登入！"),this.$router.push("/admin")})},getCarts(o=1){console.log(this.$route),r.get(`${p}/v2/api/${$}/admin/orders?page=${o}`).then(s=>{console.log("res",s),this.carts=s.data.orders,this.pages=s.data.pagination}).catch(s=>{alert(s)})}}},V={class:"d-flex"},C={class:"p-2 flex-shrink-0 flex-column text-white",style:{width:"17.5em",height:"100vh","background-color":"#41774A"}},E=t("div",{class:"d-md-flex align-content-center"},[t("img",{src:w,style:{height:"7.5em"},alt:""})],-1),L={class:"nav flex-column"},T={class:"nav-item"},A={class:"nav-item"},R={class:"p-2 mt-4 mx-3 w-100"},B=t("h4",null,"購物車管理頁面",-1),D={class:"table mt-4"},I=t("thead",null,[t("tr",null,[t("th",{width:"120"}," 訂購人姓名 "),t("th",null,"備註"),t("th",{width:"120"}," 電話 "),t("th",{width:"120"}," 電子信箱 "),t("th",{width:"100"}," 詳細資料 ")])],-1),S={class:"text-end"},z={class:"text-end"},N=t("td",null,[t("button",{style:{"background-color":"#41774A"},type:"button",class:"btn btn-primary"},"詳細")],-1),O={class:""},P={"aria-label":"..."},U={class:"justify-content-center pagination pagination-sm"},F=["onClick"];function H(o,s,M,j,c,f){const l=k("RouterLink");return n(),a("div",V,[t("div",C,[E,t("ul",L,[t("li",T,[d(l,{class:"nav-link text-white",to:"/admin/products"},{default:h(()=>[m("產品管理列表")]),_:1})]),t("li",A,[d(l,{class:"nav-link text-white",to:"/admin/order"},{default:h(()=>[m("購物車管理列表")]),_:1})])])]),t("div",R,[B,t("table",D,[I,(n(!0),a(_,null,u(c.carts,e=>(n(),a("tbody",{key:e.id},[t("tr",null,[t("td",null,i(e.user.name),1),t("td",null,i(e.user.address),1),t("td",S,i(e.user.tel),1),t("td",z,i(e.user.email),1),N])]))),128))]),t("div",O,[t("nav",P,[t("ul",U,[(n(!0),a(_,null,u(c.pages.total_pages,e=>(n(),a("li",{class:v(["page-item",{active:e===c.pages.current_page}]),key:e+123},[t("a",{class:"page-link",onClick:x(q=>f.getCarts(e),["prevent"]),href:"#",tabindex:"-1"},i(e),9,F)],2))),128))])])])])])}const Q=g(y,[["render",H]]);export{Q as default};
